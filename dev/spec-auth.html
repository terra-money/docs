<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Auth | Terra Docs</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7420256/6416592/css/fonts.css">
    <link rel="stylesheet" type="text/css" href="https://terra.money/static/fonts/jetbrainsMono.css?updated=190220">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,500,700&amp;display=swap">
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <meta name="description" content="Terra is the decentralized financial infrastructure powering the innovation of money. Terra provides the foundational building blocks for a new digital economy with its stablecoin protocol, oracle system, smart contracts, and plan for mass-user adoption.">
    <link rel="preload" href="/assets/css/0.styles.f13d3408.css" as="style"><link rel="preload" href="/assets/js/app.920360bc.js" as="script"><link rel="preload" href="/assets/js/3.c619ea57.js" as="script"><link rel="preload" href="/assets/js/15.be3b7f25.js" as="script"><link rel="prefetch" href="/assets/js/10.1f1ed6d9.js"><link rel="prefetch" href="/assets/js/11.1990e9a0.js"><link rel="prefetch" href="/assets/js/12.9e056092.js"><link rel="prefetch" href="/assets/js/13.5547d822.js"><link rel="prefetch" href="/assets/js/14.de810803.js"><link rel="prefetch" href="/assets/js/16.9e6f060b.js"><link rel="prefetch" href="/assets/js/17.12aa8d7f.js"><link rel="prefetch" href="/assets/js/18.b0f0f87e.js"><link rel="prefetch" href="/assets/js/19.731e6c0e.js"><link rel="prefetch" href="/assets/js/20.0ac01542.js"><link rel="prefetch" href="/assets/js/21.b45d43f6.js"><link rel="prefetch" href="/assets/js/22.7c870b00.js"><link rel="prefetch" href="/assets/js/23.82163540.js"><link rel="prefetch" href="/assets/js/24.bf0b4064.js"><link rel="prefetch" href="/assets/js/25.512683c8.js"><link rel="prefetch" href="/assets/js/26.6bb7af3e.js"><link rel="prefetch" href="/assets/js/27.890975d2.js"><link rel="prefetch" href="/assets/js/28.26cdc928.js"><link rel="prefetch" href="/assets/js/29.58d12201.js"><link rel="prefetch" href="/assets/js/30.23dc9449.js"><link rel="prefetch" href="/assets/js/31.524b8a9e.js"><link rel="prefetch" href="/assets/js/32.3f3b5ac8.js"><link rel="prefetch" href="/assets/js/33.64c48491.js"><link rel="prefetch" href="/assets/js/34.c5e8ccd0.js"><link rel="prefetch" href="/assets/js/35.3bd88c35.js"><link rel="prefetch" href="/assets/js/36.42cb79f2.js"><link rel="prefetch" href="/assets/js/37.d17d4ee6.js"><link rel="prefetch" href="/assets/js/38.07bd0f1d.js"><link rel="prefetch" href="/assets/js/39.f96cd11e.js"><link rel="prefetch" href="/assets/js/4.904f60d4.js"><link rel="prefetch" href="/assets/js/40.6e439a49.js"><link rel="prefetch" href="/assets/js/41.ac54b51c.js"><link rel="prefetch" href="/assets/js/42.465d2f68.js"><link rel="prefetch" href="/assets/js/43.4021a520.js"><link rel="prefetch" href="/assets/js/44.b9a07304.js"><link rel="prefetch" href="/assets/js/45.b30283ba.js"><link rel="prefetch" href="/assets/js/46.4c0e5685.js"><link rel="prefetch" href="/assets/js/47.38ca6ff7.js"><link rel="prefetch" href="/assets/js/48.1985b508.js"><link rel="prefetch" href="/assets/js/49.659afb33.js"><link rel="prefetch" href="/assets/js/5.9be40a73.js"><link rel="prefetch" href="/assets/js/50.0929b081.js"><link rel="prefetch" href="/assets/js/51.51182778.js"><link rel="prefetch" href="/assets/js/52.edc42990.js"><link rel="prefetch" href="/assets/js/53.72553c2e.js"><link rel="prefetch" href="/assets/js/54.8f98984d.js"><link rel="prefetch" href="/assets/js/55.db55decb.js"><link rel="prefetch" href="/assets/js/56.d7ff780e.js"><link rel="prefetch" href="/assets/js/57.b8ef8962.js"><link rel="prefetch" href="/assets/js/58.23345f1d.js"><link rel="prefetch" href="/assets/js/59.2c864ca8.js"><link rel="prefetch" href="/assets/js/6.b4f96f88.js"><link rel="prefetch" href="/assets/js/60.c0ba1e9a.js"><link rel="prefetch" href="/assets/js/61.30a5720c.js"><link rel="prefetch" href="/assets/js/7.345f9a8d.js"><link rel="prefetch" href="/assets/js/8.a634bf07.js"><link rel="prefetch" href="/assets/js/9.7129aa59.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.eec9cc92.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f13d3408.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"></div> <a href="/" class="home-link router-link-active"><img src="/img/docs_logo.svg" alt="Terra Docs" class="logo"> <span class="site-name can-hide">Terra Docs</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/dapps/" class="nav-link">Contracts</a></div><div class="nav-item"><a href="/validator/" class="nav-link">Validators</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">Core</a></div><div class="nav-item"><a href="https://github.com/terra-project/core" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form></div></header> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/dapps/" class="nav-link">Contracts</a></div><div class="nav-item"><a href="/validator/" class="nav-link">Validators</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">Core</a></div><div class="nav-item"><a href="https://github.com/terra-project/core" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav>  <ul class="sidebar-links"><li><a href="/dev/" aria-current="page" class="sidebar-link">Developer Guide</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Module Specs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/spec-auth.html" aria-current="page" class="active sidebar-link">Auth</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#fees" class="sidebar-link">Fees</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#gas-fee" class="sidebar-link">Gas Fee</a></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#stability-fee" class="sidebar-link">Stability Fee</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#parameters" class="sidebar-link">Parameters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#maxmemocharacters" class="sidebar-link">MaxMemoCharacters</a></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#txsiglimit" class="sidebar-link">TxSigLimit</a></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#txsizecostperbyte" class="sidebar-link">TxSizeCostPerByte</a></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#sigverifycosted25519" class="sidebar-link">SigVerifyCostED25519</a></li><li class="sidebar-sub-header"><a href="/dev/spec-auth.html#sigverifycostsecp256k1" class="sidebar-link">SigVerifyCostSecp256k1</a></li></ul></li></ul></li><li><a href="/dev/spec-bank.html" class="sidebar-link">Bank</a></li><li><a href="/dev/spec-distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/dev/spec-governance.html" class="sidebar-link">Governance</a></li><li><a href="/dev/spec-market.html" class="sidebar-link">Market</a></li><li><a href="/dev/spec-msgauth.html" class="sidebar-link">MsgAuth</a></li><li><a href="/dev/spec-oracle.html" class="sidebar-link">Oracle</a></li><li><a href="/dev/spec-slashing.html" class="sidebar-link">Slashing</a></li><li><a href="/dev/spec-staking.html" class="sidebar-link">Staking</a></li><li><a href="/dev/spec-supply.html" class="sidebar-link">Supply</a></li><li><a href="/dev/spec-treasury.html" class="sidebar-link">Treasury</a></li><li><a href="/dev/spec-wasm.html" class="sidebar-link">WASM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other Resources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://pkg.go.dev/github.com/terra-project/core?tab=subdirectories" target="_blank" rel="noopener noreferrer" class="sidebar-link">Terra Core GoDoc</a></li><li><a href="https://swagger.terra.money" target="_blank" rel="noopener noreferrer" class="sidebar-link">Terra REST API</a></li></ul></section></li></ul>  <div class="sidebar_footer"><a href="https://jigu.terra.money/" target="_blank"><div class="image"><img src="/img/jigu_logo.svg"></div> <div class="name"><div><b>Jigu</b> Python SDK
          <i class="material-icons">transit_enterexit</i></div></div></a> <a href="https://terra-project.github.io/terra.js/" target="_blank"><div class="image"><img src="/img/terra_js.svg"></div> <div class="name"><div><b>Terra.js</b> JS SDK
          <i class="material-icons">transit_enterexit</i></div></div></a></div></aside> <main class="page"> <nav id="breadcrumb" class="breadcrumb-container" data-v-5c2bdde3><a href="/" class="breadcrumb router-link-active" data-v-5c2bdde3><span data-v-5c2bdde3>Terra Docs</span></a><a href="/dev/" class="breadcrumb router-link-active" data-v-5c2bdde3><span data-v-5c2bdde3>Developer Guide</span></a><a href="/dev/spec-auth.html" aria-current="page" class="breadcrumb router-link-exact-active router-link-active" data-v-5c2bdde3><span data-v-5c2bdde3>Auth</span></a></nav> <div class="theme-default-content content__default"><h1 id="auth"><a href="#auth" class="header-anchor">#</a> Auth</h1> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>Terra's Auth module inherits from Cosmos SDK's <a href="https://github.com/cosmos/cosmos-sdk/tree/v0.37.4/docs/spec/auth" target="_blank" rel="noopener noreferrer"><code>auth</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> module. This document is a stub, and covers mainly important Terra-specific notes about how it is used.</p></div> <p>Terra's Auth module extends the functionality from Cosmos SDK's <code>auth</code> module with a modified ante handler which applies the stability layer fee alongside the all basic transaction validity checks (signatures, nonces, auxiliary fields). In addition, a special vesting account type is defined, which handles the logic for token vesting from the Luna presale.</p> <h2 id="fees"><a href="#fees" class="header-anchor">#</a> Fees</h2> <p>The Auth module reads the current effective <code>TaxRate</code> and <code>TaxCap</code> parameters from the <a href="/dev/spec-treasury.html"><code>Treasury</code></a> module to enforce a stability layer fee.</p> <h3 id="gas-fee"><a href="#gas-fee" class="header-anchor">#</a> Gas Fee</h3> <p>As with any other transaction, <a href="/dev/spec-bank.html#msgsend"><code>MsgSend</code></a> and <a href="/dev/spec-bank.html#msgmultisend"><code>MsgMultiSend</code></a> pay a gas fee the size of which depends on validator's preferences (each validator sets his own min-gas-fees) and the complexity of the transaction. <a href="/terracli/#a-note-on-gas-and-fees">Notes on gas and fees</a> has a more detailed explanation of how gas is computed. Important detail to note here is that gas fees are specified by the sender when the transaction is outbound.</p> <h3 id="stability-fee"><a href="#stability-fee" class="header-anchor">#</a> Stability Fee</h3> <p>In addition to the gas fee, the ante handler charges a stability fee that is a percentage of the transaction's value only for the <strong>Stable Coins</strong> except <strong>LUNA</strong>. It reads the Tax Rate and Tax Cap parameters from the <a href="/dev/spec-treasury.html"><code>Treasury</code></a> module to compute the amount of stability tax that needs to be charged.</p> <p>The <strong>Tax Rate</strong> is a parameter agreed upon by the network that specifies the percentage of payment transactions that will be collected as Tax Proceeds in the block reward, which will be distributed among the validators. The distribution model is a bit complicated and explained in detail <a href="/validator/faq.html#how-are-block-provisions-distributed">here</a>. The taxes collected per transaction cannot exceed the specific <strong>Tax Cap</strong> defined for that transaction's denomination. Every epoch, the Tax Rate and Tax Caps are recalibrated automatically by the network; see <a href="/dev/spec-treasury.html#monetary-policy-levers">here</a> for more details.</p> <p>For an example <code>MsgSend</code> transaction of ÂµSDR tokens,</p> <div class="language-text extra-class"><pre class="language-text"><code>stability fee = min(1000 * tax_rate, tax_cap(usdr))
</code></pre></div><p>For a <code>MsgMultiSend</code> transaction, a stability fee is charged from every outbound transaction.</p> <h2 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h2> <p>The subspace for the Auth module is <code>auth</code>.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Params <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	MaxMemoCharacters      <span class="token builtin">uint64</span> <span class="token string">`json:&quot;max_memo_characters&quot; yaml:&quot;max_memo_characters&quot;`</span>
	TxSigLimit             <span class="token builtin">uint64</span> <span class="token string">`json:&quot;tx_sig_limit&quot; yaml:&quot;tx_sig_limit&quot;`</span>
	TxSizeCostPerByte      <span class="token builtin">uint64</span> <span class="token string">`json:&quot;tx_size_cost_per_byte&quot; yaml:&quot;tx_size_cost_per_byte&quot;`</span>
	SigVerifyCostED25519   <span class="token builtin">uint64</span> <span class="token string">`json:&quot;sig_verify_cost_ed25519&quot; yaml:&quot;sig_verify_cost_ed25519&quot;`</span>
	SigVerifyCostSecp256k1 <span class="token builtin">uint64</span> <span class="token string">`json:&quot;sig_verify_cost_secp256k1&quot; yaml:&quot;sig_verify_cost_secp256k1&quot;`</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="maxmemocharacters"><a href="#maxmemocharacters" class="header-anchor">#</a> MaxMemoCharacters</h3> <p>Maximum permitted number of characters in the memo of a transaction.</p> <ul><li>type: <code>uint64</code></li> <li>default value: <code>256</code></li></ul> <h3 id="txsiglimit"><a href="#txsiglimit" class="header-anchor">#</a> TxSigLimit</h3> <p>The maximum number of singers in a transaction. A single transaction can have multiple messages and multiple signers. The sig verification cost is much higher than other operations, so we limit this to 100.</p> <ul><li>type: <code>uint64</code></li> <li>default value: <code>100</code></li></ul> <h3 id="txsizecostperbyte"><a href="#txsizecostperbyte" class="header-anchor">#</a> TxSizeCostPerByte</h3> <p>Used to compute gas consumption of the transaction, <code>TxSizeCostPerByte * txsize</code>.</p> <ul><li>type: <code>uint64</code></li> <li>default value: <code>10</code></li></ul> <h3 id="sigverifycosted25519"><a href="#sigverifycosted25519" class="header-anchor">#</a> SigVerifyCostED25519</h3> <p>The gas cost for verifying ED25519 signatures.</p> <ul><li>type: <code>uint64</code></li> <li>default value: <code>590</code></li></ul> <h3 id="sigverifycostsecp256k1"><a href="#sigverifycostsecp256k1" class="header-anchor">#</a> SigVerifyCostSecp256k1</h3> <p>The gas cost for verifying Secp256k1 signatures.</p> <ul><li>type: <code>uint64</code></li> <li>default value: <code>1000</code></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/terra-project/docs/edit/master/docs/dev/spec-auth.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Updated on:</span> <span class="time">7/14/2020, 7:30:37 AM</span></div></footer> <div class="page-nav"><div class="inner"><div class="prev"><a href="/dev/" class="router-link-active">Developer Guide</a></div> <div class="next"><a href="/dev/spec-bank.html">Bank</a></div></div></div>  <div class="footer-container"><div class="company"><div class="copyright">Terraform labs PTE.LTD</div> <div class="subscribe"><div class="subscribe-title">Subscribe to get updates</div> <form action="https://money.us17.list-manage.com/subscribe/post?u=8eca8dc5c91c2e30d69b1463e&id=1447662093" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" novalidate="novalidate" class="validate"><input type="email" value name="EMAIL" id="mce-EMAIL" placeholder="Email address" required="required" class="email">
        real people should not fill this in and expect good things - do not remove this or risk form bot
        signups
        <div aria-hidden="true" style="position: absolute; left: -5000px;"><input type="text" name="b_8eca8dc5c91c2e30d69b1463e_1447662093" tabindex="-1" value></div> <button type="submit">Submit</button></form></div></div> <div class="links-container"><ul class="learn"><li>Learn</li> <li><a href="https://terra.money/Terra_White_paper.pdf" target="_blank">
          White
          Paper
        </a></li> <li><a href="https://docsend.com/view/9mvr5qq" target="_blank">Decks</a></li> <li><a href="https://certik.org/reports/terra.pdf" target="_blank">Security Audit</a></li> <li><a href="https://agora.terra.money/" target="_blank">Agora Discussions</a></li></ul> <ul class="developers"><li>Tools</li> <li><a href="https://station.terra.money/" target="_blank">Terra Station</a></li> <li><a href="https://finder.terra.money/" target="_blank">Terra Finder</a></li> <li><a href="https://status.terra.money/" target="_blank">Status</a></li></ul> <ul class="developers"><li>Luna</li> <li><a href="https://docs.terra.money/luna" target="_blank">What is Luna?</a></li> <li><a href="https://docs.terra.money/integrations.html#exchanges" target="_blank">Exchanges</a></li> <li><a href="https://docs.terra.money/integrations.html#wallets" target="_blank">Wallets</a></li></ul> <ul class="developers"><li>Foundation</li> <li><a href="https://terra.money/about.html" target="_blank">Team</a></li> <li><a href="https://terra.breezy.hr/" target="_blank">Careers</a></li></ul> <ul class="developers"><li>Developers</li> <li><a href="https://github.com/terra-project" target="_blank">Github</a></li> <li><a href="https://docs.terra.money/" target="_blank">Documentation</a></li> <li><a href="https://docs.terra.money/#sdks-for-developers" target="_blank">SDKs</a></li> <li><a href="https://github.com/terra-project/TIPs" target="_blank">TIPs</a></li></ul> <ul class="developers"><li>Validators</li> <li><a href="https://docs.terra.money/validator" target="_blank">Validator Guide</a></li> <li><a href="https://github.com/terra-project/validator-profiles" target="_blank">Profiles</a></li> <li><a href="https://discord.gg/ZHBuKda" target="_blank">Discord Channel</a></li></ul></div> <div class="sns-container"><div class="logos"><a href="https://discord.gg/bYfyhUT" rel="noopener" target="_blank"><img src="https://terra.money/static/assets/images/icon_discord.png" alt="link to Terra discord room"></a> <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="https://terra.money/static/assets/images/icon_medium.png" alt="link to Terra medium"></a> <a href="https://twitter.com/terra_money" rel="noopener" target="_blank"><img src="https://terra.money/static/assets/images/icon_twitter.png" alt="link to Terra twitter"></a> <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="https://terra.money/static/assets/images/icon_youtube.png" alt="link to Terra youtube"></a> <a href="https://t.me/terra_announcements" rel="noopener" target="_blank"><img src="https://terra.money/static/assets/images/icon_telegram.png" alt="link to Terra telegram room"></a></div> <a href="https://terra.money" target="_blank" class="terramoney">terra.money</a></div></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.920360bc.js" defer></script><script src="/assets/js/3.c619ea57.js" defer></script><script src="/assets/js/15.be3b7f25.js" defer></script>
  </body>
</html>
